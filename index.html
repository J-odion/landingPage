<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0" />
    <title>Cudium</title>

    <link
      rel="stylesheet"
      href="styles.css" />
    <link
      rel="stylesheet"
      href="forms.scss" />

    <link
      rel="shortcut icon"
      href="https://cudium.com/images/logo-blue.png"
      type="image/x-icon" />
  </head>
  <body>
    <div class="logo">
      <a
        href="https://cudium.com/"
        target="_blank"
        rel="noopener noreferrer">
        <img
          class="logo-img"
          src="https://cudium.com/images/logo-white.png"
          alt="" />
      </a>

      <a
        href="https://cudium.com/"
        target="_blank"
        rel="noopener noreferrer">
        <h1 class="logo-text">Cudium</h1>
      </a>
    </div>

    <div class="container">
      <div class="comp">
        <img
          src="https://cudium.com/images/hero.png"
          alt="" />
        <h1 class="motto">Your Business’s Finance Partner</h1>
      </div>

      <div class="form">
        <div id="my-form-status"></div>
        <form
          action="https://formspree.io/f/mpzvqjkz"
          method="POST"
          id="survey-form"
          name="survey-form">
          <fieldset>
            <label
              for="name"
              id="name-label">
              <div class="lab">
                <p>Name</p>
                <span>*</span>
              </div>
              <input
                class=""
                type="text"
                id="name"
                name="name"
                placeholder="Enter your name"
                required />
            </label>
          </fieldset>
          <fieldset>
            <label
              for="email"
              id="email-label">
              <div class="lab">
                <p>Email</p>
                <span>*</span>
              </div>
              <input
                class=""
                type="email"
                id="email"
                name="email"
                placeholder="Enter your email"
                required />
            </label>
          </fieldset>
          <fieldset>
            <label
              for="number"
              id="number-label">
              <div class="lab">
                <p>Phone Number</p>
                <span>*</span>
              </div>
              <input
                class=""
                type="number"
                id="number"
                name="number"
                min="11"
                placeholder="Enter your mobile number"
                required />
            </label>
          </fieldset>

          <fieldset>
            <label for="preffered-currency">
              <div class="lab">
                <p>Preferred Currency</p>
                <span>*</span>
              </div>
              <select
                multiple
                id="preffered-currency"
                name="preffered-currency"
                class="selet">
                <option
                  selected
                  value="NGN">
                  NGN
                </option>
                <option value="USD">USD</option>
                <option value="EUR">EUR</option>
                <option value="GBP">GBP</option>
              </select>
            </label>
          </fieldset>

          <fieldset>
            <label
              for="country-of-remittance"
              id="country-of-remittance-label">
              <div class="lab">
                <p>Country of Remittance?</p>
                <span>*</span>
              </div>
              <input
                class=""
                type="text"
                id="country-of-remittance"
                name="country-of-remittance"
                placeholder="Enter your Country of Remittance"
                required />
            </label>
          </fieldset>

          <fieldset>
            <label
              for="monthly-average-volume"
              id="monthly-average-volume-label">
              <div class="lab">
                <p>Average Monthly Volume</p>
                <span>*</span>
              </div>
              <input
                class=""
                type="number"
                id="monthly-average-volume"
                name="monthly-average-volume"
                placeholder="Enter you monthly average volume (required)"
                required />
            </label>
          </fieldset>
          <button
            id="submit"
            type="submit"
            class="btn">
            Submit the form
          </button>
        </form>
      </div>

      <div class="footer">
        <p>© 2024 Cudium</p>
        <div class="menus">
          <p>
            <a
              class="menu"
              href="https://cudium.com/terms"
              >Terms of Use</a
            >
          </p>
          <p>
            <a
              class="menu"
              href="Privacy Policy"
              >Privacy Policy</a
            >
          </p>
          <p>
            <a
              class="menu"
              href=""
              >Contact</a
            >
          </p>
        </div>
      </div>
    </div>

    <script>
      const formStatus = document.getElementById('my-form-status');

      async function handleSubmit(event) {
        event.preventDefault();
        var data = new FormData(event.target);
        const responseDataMessage = 'Thanks for your submission!';

        // Disable form to prevent multiple submissions
        form.setAttribute('disabled', true);

        fetch(event.target.action, {
          method: form.method,
          body: data,
          headers: {
            Accept: 'application/json',
          },
        })
          .then((response) => {
            if (response.ok) {
              return response.json();
            } else {
              return response.json().then((data) => Promise.reject(data));
            }
          })
          .then((responseData) => {
            // Store status message in localStorage
            // Display status message
            formStatus.innerHTML = responseDataMessage;

            form.reset();
            form.style.display = 'none';
            localStorage.setItem('formStatus', responseDataMessage);
          })
          .catch((error) => {
            // Store error message in localStorage
            // Display error message
            formStatus.innerHTML =
              'Oops! There was a problem submitting your form';
            formStatus.classList.add('error');
          })
          .finally(() => {
            // Enable the form after processing
            form.removeAttribute('disabled');
          });
      }

      const form = document.getElementById('survey-form');
      form.addEventListener('submit', handleSubmit);

      // Check if there is a stored status message and display it
      const storedStatus = localStorage.getItem('formStatus');
      if (storedStatus) {
        formStatus.classList.remove('error');
        formStatus.innerHTML = storedStatus;
        form.style.display = 'none'; // Hide the form if there is a stored status
      }
    </script>
  </body>
</html>
